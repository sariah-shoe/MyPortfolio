# Backend — Portfolio API

This is the backend API for my personal portfolio site.  
It is a Node.js / Express backend designed to support a React frontend with authenticated admin editing, file uploads, and a public contact form.

The backend is intentionally scoped to one admin user and prioritizes clarity, security, and maintainability over unnecessary complexity.

---

## Tech Stack

- **Node.js** (ES modules)
- **Express**
- **MongoDB + Mongoose**
- **JWT authentication**
- **HTTP-only cookies**
- **Cloudinary** (file storage)
- **Resend** (email delivery)
- **bcrypt** (password hashing)
- **multer** (file uploads, memory storage)
- **Helmet, CORS, rate limiting**

---

## Project Structure
server/
├── api/
│ ├── aboutMe/
│ ├── experiences/
│ ├── projects/
│ ├── auth/
│ └── contact/
├── auth/
│ ├── jwt.js
│ └── cookie.js
├── config/
│ ├── cloudinary.js
│ ├── resend.js
│ └── env.js
├── middleware/
│ ├── auth.js
│ └── upload.js
├── models/
│ ├── user.model.js
│ └── fileObject.model.js
├── utils/
│ └── cloudinaryFiles.js
├── scripts/
│ └── seed-admin.js
├── app.js
├── index.js
└── routes.js


---

## Authentication & Authorization

### Authentication
- JWTs are issued on login and stored in HTTP-only cookies
- Tokens are short-lived (2 hours)
- No tokens are stored in localStorage

### Authorization
- The system supports one admin account
- Admin-only routes are protected via middleware
- Role checks are enforced server-side
- Admin account is generated by running "npm run seed:admin"

### Security Considerations
- No user enumeration on login
- Login endpoint is rate-limited
- Cookies are `httpOnly` and `secure` in production
- Auth state is derived from cookies (`/auth/me`)

---

## Core APIs

### About Me
- Singleton document (only one exists)
- Stores bio text, headshot, and resume
- Admin-only updates
- Files are uploaded to Cloudinary and tracked via `FileObject`

### Experiences
- CRUD API for work/academic experiences
- Supports up to 10 images per experience
- Images are uploaded, referenced, and deleted explicitly
- Controllers own file lifecycle (no model side effects)

### Projects
- CRUD API similar to Experiences
- Supports images, highlights, skills, and links
- Enforces validation and image limits
- Designed to mirror Experiences for consistency

### Contact
- Public, unauthenticated endpoint
- Uses honeypot + rate limiting to prevent spam
- Sends email via Resend
- No database writes
- Silent success for bot submissions

---

## File Uploads

- Uploads use multer memory storage
- Files are streamed directly to Cloudinary
- No files are written to disk
- Upload logic is centralized in a shared utility
- Controllers explicitly manage:
  - Upload
  - Deletion
  - Database cleanup

---

## Models

### User
- Email + hashed password
- Role-based access (`admin`, `viewer`)
- Password verification via bcrypt

### FileObject
- Represents a Cloudinary asset
- Stores `url`, `public_id`, and file type
- Treated as a dependent resource
- Lifecycle is managed explicitly by controllers

---

## Scripts

### Seed Admin
Creates the initial admin account.

Safeguards:
- Refuses to run in production unless explicitly enabled
- Prevents duplicate admin creation
- Uses proper password hashing

## Enviorment Variables
Necessary enviorment variables can be found in .env.example. Missing required variables cause the server to fail fast at startup.
